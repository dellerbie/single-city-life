<% content_for(:javascripts) do %>
	<%= javascript_include_tag 'swfupload' %>
	<%= javascript_include_tag 'handlers' %>
	<%= javascript_include_tag 'fileprogress' %>
	<%= javascript_include_tag 'swfupload.queue' %>
	<script type='text/javascript'>
		var swfu;

		window.onload = function () {
		  swfu = new SWFUpload({
		    // Create the custom swfupload_photos_path in the routes.rb file
		    upload_url : '<%= user_photos_path(current_user) -%>?singles_session_key=<%= session.session_id %>',
		    flash_url : '/flash/swfupload_f9.swf',

		    file_size_limit : '3072',
		    file_types : '*.jpg',
		    file_types_description : 'JPG Images',
		    file_upload_limit : '0',

		    // file_queue_error_handler : fileQueueError,
		    // file_dialog_complete_handler : fileDialogComplete,
		    // upload_progress_handler : uploadProgress,
		    // upload_error_handler : uploadError,
		    // upload_success_handler : uploadSuccess,
		    // upload_complete_handler : uploadComplete,
		
			file_queued_handler : fileQueued,
			file_queue_error_handler : fileQueueError,
			file_dialog_complete_handler : fileDialogComplete,
			queue_complete_handler : queueComplete,	// Queue plugin event
			upload_start_handler : uploadStart,
			upload_progress_handler : uploadProgress,
			upload_error_handler : uploadError,
			upload_success_handler : uploadSuccess,
			upload_complete_handler : uploadComplete,


		    custom_settings : { 
			  progressTarget: 'fsUploadProgress',
			  cancelButtonId: 'btnCancel'
		    },

		    debug: false

		  });
		};
	</script>
<% end %>

<div class="yui-g">
	<div class="selector">
		<h2>Your Photos</h2>
	</div>
	
	<span class="newMedia"><a href="#" onclick="swfu.selectFiles();">Add Photos</a></span>
	
	<div id="fsUploadProgress" class="fieldset flash" style="clear:both;">
		<span class="legend">Upload Queue</span>
	</div>
	
	<div id="status"></div>
	<div id="thumbnails"></div>
	<span id="spanButtonPlaceHolder"></span>

	<input type="button"  onclick="swfu.selectFiles();" value="Upload"/>
	<input id="btnCancel" type="button" onclick="swfu.cancelQueue();" value="Cancel All Uploads" />
	
	<!--
	<ul id="gallery">
		<li class="photo mouseover">
			<a href="show_photo.html">
				<img src="/images/user.jpg" width="140" height="140" alt=""/>
			</a>
			<span class="description">This was me in california, being a dork.</span>
			<a title="Edit Photo" class="edit_link" href="#"> </a>
		</li>
		<li class="photo">
			<a href="show_photo.html">
				<img src="/images/user.jpg" width="140" height="140" alt=""/>
			</a>
			<span class="description">This was me in california, being a dork.</span>
		</li>
		<li class="photo">
			<a href="show_photo.html">
				<img src="/images/user.jpg" width="140" height="140" alt=""/>
			</a>
			<span class="description">This was me in california, being a dork.</span>
		</li>
		<li class="photo">
			<a href="show_photo.html">
				<img src="/images/user.jpg" width="140" height="140" alt=""/>
			</a>
			<span class="description">This was me in california, being a dork.</span>
		</li>
		<li class="photo">
			<a href="show_photo.html">
				<img src="/images/user.jpg" width="140" height="140" alt=""/>
			</a>
			<span class="description">This was me in california, being a dork.</span>
		</li>
		<li class="photo">
			<a href="show_photo.html">
				<img src="/images/user.jpg" width="140" height="140" alt=""/>
			</a>
			<span class="description">This was me in california, being a dork.</span>
		</li>
		<div style="clear: both;"></div>
	</ul>
	-->
</div>
